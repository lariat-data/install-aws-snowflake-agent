{
  "version": 4,
  "terraform_version": "1.2.1",
  "serial": 718,
  "lineage": "b9e60068-bcf6-1838-fdba-a7e361c54ed1",
  "outputs": {
    "lariat_snowflake_user_password": {
      "value": "VnBrK-fqh_\u0026F+yEx",
      "type": "string",
      "sensitive": true
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "358681817243",
            "arn": "arn:aws:iam::358681817243:user/aaditya",
            "id": "358681817243",
            "user_id": "AIDAVHAY2GCNUG5L6UJ7H"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_ecr_image",
      "name": "lariat_snowflake_agent_image",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "sha256:7a3c7b8f7b23ab98e68303e92967b6cce5f343c3b026a3fb45c889b8bf787f4d",
            "image_digest": "sha256:7a3c7b8f7b23ab98e68303e92967b6cce5f343c3b026a3fb45c889b8bf787f4d",
            "image_pushed_at": 1666029149,
            "image_size_in_bytes": 690826894,
            "image_tag": "latest",
            "image_tags": [
              "latest"
            ],
            "registry_id": "358681817243",
            "repository_name": "lariat-snowflake-agent"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_ecr_repository",
      "name": "lariat_snowflake_agent_repository",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:us-east-2:358681817243:repository/lariat-snowflake-agent",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "id": "lariat-snowflake-agent",
            "image_scanning_configuration": [
              {
                "scan_on_push": false
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "name": "lariat-snowflake-agent",
            "registry_id": "358681817243",
            "repository_url": "358681817243.dkr.ecr.us-east-2.amazonaws.com/lariat-snowflake-agent",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "allow_access_from_lariat_account",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1233450814",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\",\n        \"s3:GetObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*\",\n        \"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"\n      ],\n      \"Principal\": {\n        \"AWS\": \"358681817243\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:GetObject",
                  "s3:ListBucket"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "358681817243"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004",
                  "arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda-assume-role-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lariat_lambda_create_user_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2454841814",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ListKeys\",\n        \"kms:ListAliases\",\n        \"kms:GenerateDataKey\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"arn:aws:kms:us-east-2:358681817243:key/d3cc09b1-6b1b-432a-a8f4-f54f138caa4e\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:CreateGrant",
                  "kms:GenerateDataKey",
                  "kms:ListAliases",
                  "kms:ListKeys"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:kms:us-east-2:358681817243:key/d3cc09b1-6b1b-432a-a8f4-f54f138caa4e"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lariat_lambda_kms_create_user_key_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3708430791",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::358681817243:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GenerateDataKey\",\n        \"kms:Encrypt\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::358681817243:user/lariat-snowflake-lambda-create-user\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::358681817243:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "kms:CreateGrant",
                  "kms:Decrypt",
                  "kms:Encrypt",
                  "kms:GenerateDataKey"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::358681817243:user/lariat-snowflake-lambda-create-user"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lariat_snowflake_agent_repository_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1174767196",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ecr:UploadLayerPart\",\n        \"ecr:SetRepositoryPolicy\",\n        \"ecr:PutImage\",\n        \"ecr:ListImages\",\n        \"ecr:InitiateLayerUpload\",\n        \"ecr:GetRepositoryPolicy\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:DescribeRepositories\",\n        \"ecr:DeleteRepositoryPolicy\",\n        \"ecr:DeleteRepository\",\n        \"ecr:CompleteLayerUpload\",\n        \"ecr:BatchGetImage\",\n        \"ecr:BatchDeleteImage\",\n        \"ecr:BatchCheckLayerAvailability\"\n      ],\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "ecr:BatchCheckLayerAvailability",
                  "ecr:BatchDeleteImage",
                  "ecr:BatchGetImage",
                  "ecr:CompleteLayerUpload",
                  "ecr:DeleteRepository",
                  "ecr:DeleteRepositoryPolicy",
                  "ecr:DescribeRepositories",
                  "ecr:GetDownloadUrlForLayer",
                  "ecr:GetRepositoryPolicy",
                  "ecr:InitiateLayerUpload",
                  "ecr:ListImages",
                  "ecr:PutImage",
                  "ecr:SetRepositoryPolicy",
                  "ecr:UploadLayerPart"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "lariat_snowflake_lambda_trigger_5_minutely",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180600000002",
            "description": "",
            "event_bus_name": "default",
            "event_pattern": null,
            "id": "lariat-snowflake-lambda-trigger20221017160908180600000002",
            "is_enabled": true,
            "name": "lariat-snowflake-lambda-trigger20221017160908180600000002",
            "name_prefix": "lariat-snowflake-lambda-trigger",
            "role_arn": "",
            "schedule_expression": "cron(48 * * * ? *)",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "lariat_snowflake_lambda_trigger_daily",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180800000003",
            "description": "",
            "event_bus_name": "default",
            "event_pattern": null,
            "id": "lariat-snowflake-lambda-trigger20221017160908180800000003",
            "is_enabled": true,
            "name": "lariat-snowflake-lambda-trigger20221017160908180800000003",
            "name_prefix": "lariat-snowflake-lambda-trigger",
            "role_arn": "",
            "schedule_expression": "rate(1 day)",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "lariat_snowflake_lambda_trigger_heartbeat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180500000001",
            "description": "",
            "event_bus_name": "default",
            "event_pattern": null,
            "id": "lariat-snowflake-lambda-trigger20221017160908180500000001",
            "is_enabled": true,
            "name": "lariat-snowflake-lambda-trigger20221017160908180500000001",
            "name_prefix": "lariat-snowflake-lambda-trigger",
            "role_arn": "",
            "schedule_expression": "cron(59 17 17 10 ? 2022)",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "lariat_snowflake_lambda_trigger_5_minutely_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "http_target": [],
            "id": "lariat-snowflake-lambda-trigger20221017160908180600000002-terraform-2022101716101723960000000a",
            "input": "{\"run_type\":\"batch_agent_query_dispatch\"}",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "lariat-snowflake-lambda-trigger20221017160908180600000002",
            "run_command_targets": [],
            "sqs_target": [],
            "target_id": "terraform-2022101716101723960000000a"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_5_minutely",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "lariat_snowflake_lambda_trigger_daily_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "http_target": [],
            "id": "lariat-snowflake-lambda-trigger20221017160908180800000003-terraform-2022101716101723980000000b",
            "input": "{\"run_type\":\"raw_schema\"}",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "lariat-snowflake-lambda-trigger20221017160908180800000003",
            "run_command_targets": [],
            "sqs_target": [],
            "target_id": "terraform-2022101716101723980000000b"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_daily",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "lariat_snowflake_lambda_trigger_heartbeat_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "http_target": [],
            "id": "lariat-snowflake-lambda-trigger20221017160908180500000001-terraform-20221017161017239000000009",
            "input": "{\"run_type\":\"raw_schema\"}",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "lariat-snowflake-lambda-trigger20221017160908180500000001",
            "run_command_targets": [],
            "sqs_target": [],
            "target_id": "terraform-20221017161017239000000009"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_heartbeat",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecr_repository_policy",
      "name": "lariat_snowflake_agent_repo_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "lariat-snowflake-agent",
            "policy": "{\"Statement\":[{\"Action\":[\"ecr:UploadLayerPart\",\"ecr:SetRepositoryPolicy\",\"ecr:PutImage\",\"ecr:ListImages\",\"ecr:InitiateLayerUpload\",\"ecr:GetRepositoryPolicy\",\"ecr:GetDownloadUrlForLayer\",\"ecr:DescribeRepositories\",\"ecr:DeleteRepositoryPolicy\",\"ecr:DeleteRepository\",\"ecr:CompleteLayerUpload\",\"ecr:BatchGetImage\",\"ecr:BatchDeleteImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "registry_id": "358681817243",
            "repository": "lariat-snowflake-agent"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lariat_snowflake_agent_repository_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_access_key",
      "name": "lambda_create_user_keys",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "create_date": "2022-10-17T16:09:09Z",
            "encrypted_secret": null,
            "encrypted_ses_smtp_password_v4": null,
            "id": "AKIAVHAY2GCNYCFHWMVW",
            "key_fingerprint": null,
            "pgp_key": null,
            "secret": "EIUeAwixFcKg0t9NFc6Wskc8gaIb+hpM1oaiz3WK",
            "ses_smtp_password_v4": "BF19dijOC6RTyjQOD+whZa8e5YxSRLpohcsYfE5vDVRH",
            "status": "Active",
            "user": "lariat-snowflake-lambda-create-user"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_user.lambda_create_user"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lariat_snowflake_monitoring_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::358681817243:policy/lariat-snowflake-monitoring-policy20221017160910875200000007",
            "description": "",
            "id": "arn:aws:iam::358681817243:policy/lariat-snowflake-monitoring-policy20221017160910875200000007",
            "name": "lariat-snowflake-monitoring-policy20221017160910875200000007",
            "name_prefix": "lariat-snowflake-monitoring-policy",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:CreateBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::lariat-snowflake-default-config20221017160908187700000005/*\",\"arn:aws:s3:::lariat-snowflake-default-config20221017160908187700000005\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"],\"Sid\":\"VisualEditor1\"},{\"Action\":[\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::lariat-snowflake-default-config20221017160908187700000005\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"],\"Sid\":\"VisualEditor2\"},{\"Action\":\"s3:ListBucket\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::*\",\"Sid\":\"VisualEditor4\"},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::*\",\"Sid\":\"VisualEditor5\"},{\"Action\":[\"s3:ListBucketMultipartUploads\",\"s3:AbortMultipartUpload\",\"s3:ListBucket\",\"s3:GetBucketLocation\",\"s3:ListMultipartUploadParts\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"],\"Sid\":\"VisualEditor6\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAVHAY2GCN2AV7PQHTY",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lariat_snowflake_monitoring_lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::358681817243:role/lariat-snowflak-monitoring-lambda-role20221017160911313500000008",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2022-10-17T16:09:11Z",
            "description": "",
            "force_detach_policies": false,
            "id": "lariat-snowflak-monitoring-lambda-role20221017160911313500000008",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::358681817243:policy/lariat-snowflake-monitoring-policy20221017160910875200000007",
              "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "lariat-snowflak-monitoring-lambda-role20221017160911313500000008",
            "name_prefix": "lariat-snowflak-monitoring-lambda-role",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "unique_id": "AROAVHAY2GCN2VHK7PU7E"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lambda-assume-role-policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_user",
      "name": "lambda_create_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::358681817243:user/lariat-snowflake-lambda-create-user",
            "force_destroy": false,
            "id": "lariat-snowflake-lambda-create-user",
            "name": "lariat-snowflake-lambda-create-user",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "unique_id": "AIDAVHAY2GCNW23EDGCUK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_user_policy",
      "name": "lambda_create_user_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "lariat-snowflake-lambda-create-user:lariat-snowflake-lambda-create-user",
            "name": "lariat-snowflake-lambda-create-user",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ListKeys\",\n        \"kms:ListAliases\",\n        \"kms:GenerateDataKey\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"arn:aws:kms:us-east-2:358681817243:key/d3cc09b1-6b1b-432a-a8f4-f54f138caa4e\"\n    }\n  ]\n}",
            "user": "lariat-snowflake-lambda-create-user"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_user.lambda_create_user",
            "aws_kms_key.lambda_create_user_kms",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lariat_lambda_create_user_policy",
            "data.aws_iam_policy_document.lariat_lambda_kms_create_user_key_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_user_policy_attachment",
      "name": "lambda_create_user_lambda_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "lariat-snowflake-lambda-create-user-20221017160909033400000006",
            "policy_arn": "arn:aws:iam::aws:policy/AWSLambda_FullAccess",
            "user": "lariat-snowflake-lambda-create-user"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_user.lambda_create_user"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "lambda_create_user_kms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-2:358681817243:key/d3cc09b1-6b1b-432a-a8f4-f54f138caa4e",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "A key allowing the lambda create user to encrypt/decrypt env vars",
            "enable_key_rotation": false,
            "id": "d3cc09b1-6b1b-432a-a8f4-f54f138caa4e",
            "is_enabled": true,
            "key_id": "d3cc09b1-6b1b-432a-a8f4-f54f138caa4e",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::358681817243:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GenerateDataKey\",\n        \"kms:Encrypt\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::358681817243:user/lariat-snowflake-lambda-create-user\"\n      }\n    }\n  ]\n}",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_user.lambda_create_user",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lariat_lambda_kms_create_user_key_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lariat_snowflake_monitoring_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].lambda_create_user",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "LARIAT_API_KEY": "162814e3ec2236e9e557ac8aa87a44cf",
                  "LARIAT_APPLICATION_KEY": "28488da99d7842c6494aeaf4bf95251b",
                  "LARIAT_ENDPOINT": "http://ingest-staging.lariatdata.com/api",
                  "LARIAT_OUTPUT_BUCKET": "lariat-batch-agent-sink-staging",
                  "S3_AGENT_CONFIG_PATH": "lariat-snowflake-default-config20221017160908187700000005/snowflake_agent.yaml",
                  "S3_QUERY_RESULTS_BUCKET": "lariat-snowflak-default-query-results20221017160908183800000004",
                  "SNOWFLAKE_ACCOUNT": "CL46984.us-east-2.aws",
                  "SNOWFLAKE_PASSWORD": "VnBrK-fqh_\u0026F+yEx",
                  "SNOWFLAKE_USER": "lariat_snowflake_user",
                  "SNOWFLAKE_WAREHOUSE": "lariat_snowflake_warehouse"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "lariat-snowflake-monitoring-lambda",
            "handler": "",
            "id": "lariat-snowflake-monitoring-lambda",
            "image_config": [],
            "image_uri": "358681817243.dkr.ecr.us-east-2.amazonaws.com/lariat-snowflake-agent@sha256:7a3c7b8f7b23ab98e68303e92967b6cce5f343c3b026a3fb45c889b8bf787f4d",
            "invoke_arn": "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-10-17T17:54:24.000+0000",
            "layers": [],
            "memory_size": 512,
            "package_type": "Image",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:358681817243:function:lariat-snowflake-monitoring-lambda:$LATEST/invocations",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::358681817243:role/lariat-snowflak-monitoring-lambda-role20221017160911313500000008",
            "runtime": "",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "7a3c7b8f7b23ab98e68303e92967b6cce5f343c3b026a3fb45c889b8bf787f4d",
            "source_code_size": 0,
            "tags": {
              "VendorLariat": "lariat-us-east-2"
            },
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "SNOWFLAKE_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "random_password.lariat_snowflake_user_password",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_cloudwatch_5_minutely",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "lariat-snowflake-monitoring-lambda",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromCloudWatch5Minutely",
            "principal": "events.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180600000002",
            "statement_id": "AllowExecutionFromCloudWatch5Minutely",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_5_minutely",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_cloudwatch_daily",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "lariat-snowflake-monitoring-lambda",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromCloudWatchDaily",
            "principal": "events.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180800000003",
            "statement_id": "AllowExecutionFromCloudWatchDaily",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_daily",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_cloudwatch_heartbeat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "lariat-snowflake-monitoring-lambda",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromCloudWatchHeartbeat",
            "principal": "events.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:events:us-east-2:358681817243:rule/lariat-snowflake-lambda-trigger20221017160908180500000001",
            "statement_id": "AllowExecutionFromCloudWatchHeartbeat",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cloudwatch_event_rule.lariat_snowflake_lambda_trigger_heartbeat",
            "aws_iam_access_key.lambda_create_user_keys",
            "aws_iam_policy.lariat_snowflake_monitoring_policy",
            "aws_iam_role.lariat_snowflake_monitoring_lambda_role",
            "aws_iam_user.lambda_create_user",
            "aws_lambda_function.lariat_snowflake_monitoring_lambda",
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket",
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_caller_identity.current",
            "data.aws_ecr_image.lariat_snowflake_agent_image",
            "data.aws_ecr_repository.lariat_snowflake_agent_repository",
            "data.aws_iam_policy_document.lambda-assume-role-policy",
            "null_resource.previous",
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "lariat_snowflake_agent_config_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::lariat-snowflake-default-config20221017160908187700000005",
            "bucket": "lariat-snowflake-default-config20221017160908187700000005",
            "bucket_domain_name": "lariat-snowflake-default-config20221017160908187700000005.s3.amazonaws.com",
            "bucket_prefix": "lariat-snowflake-default-config",
            "bucket_regional_domain_name": "lariat-snowflake-default-config20221017160908187700000005.s3.us-east-2.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "c646f69ab34e76a286e8cb785466ced048974466f126b3591e32feacd67aec02",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z2O1EMRO9K5GLX",
            "id": "lariat-snowflake-default-config20221017160908187700000005",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-2",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [],
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "lariat_snowflake_query_results_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004",
            "bucket": "lariat-snowflak-default-query-results20221017160908183800000004",
            "bucket_domain_name": "lariat-snowflak-default-query-results20221017160908183800000004.s3.amazonaws.com",
            "bucket_prefix": "lariat-snowflak-default-query-results",
            "bucket_regional_domain_name": "lariat-snowflak-default-query-results20221017160908183800000004.s3.us-east-2.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "c646f69ab34e76a286e8cb785466ced048974466f126b3591e32feacd67aec02",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z2O1EMRO9K5GLX",
            "id": "lariat-snowflak-default-query-results20221017160908183800000004",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::358681817243:root\"},\"Action\":[\"s3:ListBucket\",\"s3:GetObject\"],\"Resource\":[\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"]}]}",
            "region": "us-east-2",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [],
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "allow_access_from_lariat_account_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "lariat-snowflak-default-query-results20221017160908183800000004",
            "id": "lariat-snowflak-default-query-results20221017160908183800000004",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:ListBucket\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"358681817243\"},\"Resource\":[\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004/*\",\"arn:aws:s3:::lariat-snowflak-default-query-results20221017160908183800000004\"],\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.lariat_snowflake_query_results_bucket",
            "data.aws_iam_policy_document.allow_access_from_lariat_account"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "lariat_snowflake_agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "lariat-snowflake-default-config20221017160908187700000005",
            "bucket_key_enabled": false,
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "62b7e9a9d77816bf41c2d098c40eca40",
            "force_destroy": false,
            "id": "snowflake_agent.yaml",
            "key": "snowflake_agent.yaml",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "",
            "source": "config/snowflake_agent.yaml",
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": {},
            "tags_all": {
              "VendorLariat": "lariat-us-east-2"
            },
            "version_id": "",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.lariat_snowflake_agent_config_bucket"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "previous",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1016267529960449007",
            "triggers": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_password",
      "name": "lariat_snowflake_user_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$LUgWRZ7CaFzlAHo3E1EmPOO5W/QylFZcLeTvDCecS34lW7sdlGKUe",
            "id": "none",
            "keepers": null,
            "length": 16,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": "!#$%\u0026*()-_=+[]{}\u003c\u003e:?",
            "result": "VnBrK-fqh_\u0026F+yEx",
            "special": true,
            "upper": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_role",
      "name": "lariat_snowflake_role",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": "role for running lariat monitoring queries",
            "id": "lariat_snowflake_role",
            "name": "lariat_snowflake_role",
            "tag": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_role_grants",
      "name": "lariat_snowflake_grants",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_multiple_grants": false,
            "id": "lariat_snowflake_role|||||false",
            "role_name": "lariat_snowflake_role",
            "roles": [],
            "users": [
              "lariat_snowflake_user"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_user.lariat_snowflake_user",
            "snowflake_warehouse.lariat_snowflake_warehouse"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_user",
      "name": "lariat_snowflake_user",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": "user for running lariat monitoring queries",
            "default_namespace": "",
            "default_role": "lariat_snowflake_role",
            "default_secondary_roles": [],
            "default_warehouse": "lariat_snowflake_warehouse",
            "disabled": false,
            "display_name": "lariat_snowflake_user",
            "email": "",
            "first_name": "",
            "has_rsa_public_key": false,
            "id": "lariat_snowflake_user",
            "last_name": "",
            "login_name": "LARIAT_SNOWFLAKE_USER",
            "must_change_password": null,
            "name": "lariat_snowflake_user",
            "password": "VnBrK-fqh_\u0026F+yEx",
            "rsa_public_key": null,
            "rsa_public_key_2": null,
            "tag": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "password"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "random_password.lariat_snowflake_user_password",
            "snowflake_role.lariat_snowflake_role",
            "snowflake_warehouse.lariat_snowflake_warehouse"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_warehouse",
      "name": "lariat_snowflake_warehouse",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "auto_resume": true,
            "auto_suspend": 60,
            "comment": "warehouse for running lariat monitoring queries",
            "id": "lariat_snowflake_warehouse",
            "initially_suspended": true,
            "max_cluster_count": 0,
            "max_concurrency_level": 8,
            "min_cluster_count": 0,
            "name": "lariat_snowflake_warehouse",
            "resource_monitor": "null",
            "scaling_policy": "",
            "statement_queued_timeout_in_seconds": 0,
            "statement_timeout_in_seconds": 172800,
            "tag": [],
            "wait_for_provisioning": null,
            "warehouse_size": "X-Small"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_warehouse_grant",
      "name": "lariat_snowflake_warehouse_grant_monitor",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_multiple_grants": false,
            "id": "lariat_snowflake_warehouse|||MONITOR|lariat_snowflake_role|false",
            "privilege": "MONITOR",
            "roles": [
              "lariat_snowflake_role"
            ],
            "warehouse_name": "lariat_snowflake_warehouse",
            "with_grant_option": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "snowflake_role.lariat_snowflake_role",
            "snowflake_warehouse.lariat_snowflake_warehouse"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_warehouse_grant",
      "name": "lariat_snowflake_warehouse_grant_operate",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_multiple_grants": false,
            "id": "lariat_snowflake_warehouse|||OPERATE|lariat_snowflake_role|false",
            "privilege": "OPERATE",
            "roles": [
              "lariat_snowflake_role"
            ],
            "warehouse_name": "lariat_snowflake_warehouse",
            "with_grant_option": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "snowflake_role.lariat_snowflake_role",
            "snowflake_warehouse.lariat_snowflake_warehouse"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowflake_warehouse_grant",
      "name": "lariat_snowflake_warehouse_grant_usage",
      "provider": "provider[\"registry.terraform.io/snowflake-labs/snowflake\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_multiple_grants": false,
            "id": "lariat_snowflake_warehouse|||USAGE|lariat_snowflake_role|false",
            "privilege": "USAGE",
            "roles": [
              "lariat_snowflake_role"
            ],
            "warehouse_name": "lariat_snowflake_warehouse",
            "with_grant_option": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "snowflake_role.lariat_snowflake_role",
            "snowflake_warehouse.lariat_snowflake_warehouse"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "snowsql_exec",
      "name": "lariat_read_only_grants",
      "provider": "provider[\"registry.terraform.io/aidanmelen/snowsql\"]",
      "instances": [
        {
          "index_key": "LARIAT_SNOWFLAKE_TEST",
          "schema_version": 0,
          "attributes": {
            "create": [
              {
                "number_of_statements": -1,
                "statements": "GRANT USAGE ON DATABASE LARIAT_SNOWFLAKE_TEST TO ROLE \"lariat_snowflake_role\";\nGRANT USAGE ON ALL SCHEMAS IN DATABASE LARIAT_SNOWFLAKE_TEST TO ROLE \"lariat_snowflake_role\";\nGRANT SELECT ON ALL TABLES IN DATABASE LARIAT_SNOWFLAKE_TEST TO ROLE \"lariat_snowflake_role\";\nGRANT SELECT ON FUTURE TABLES IN DATABASE LARIAT_SNOWFLAKE_TEST TO ROLE \"lariat_snowflake_role\";\n"
              }
            ],
            "delete": [
              {
                "number_of_statements": -1,
                "statements": "REVOKE USAGE ON DATABASE LARIAT_SNOWFLAKE_TEST FROM ROLE \"lariat_snowflake_role\";\nREVOKE USAGE ON ALL SCHEMAS IN DATABASE LARIAT_SNOWFLAKE_TEST FROM ROLE \"lariat_snowflake_role\";\nREVOKE ALL PRIVILEGES ON ALL TABLES IN DATABASE LARIAT_SNOWFLAKE_TEST FROM ROLE \"lariat_snowflake_role\";\nREVOKE ALL PRIVILEGES ON FUTURE TABLES IN DATABASE LARIAT_SNOWFLAKE_TEST FROM ROLE \"lariat_snowflake_role\";\n"
              }
            ],
            "id": "lariat-read-only-grants-LARIAT_SNOWFLAKE_TEST",
            "name": "lariat-read-only-grants-LARIAT_SNOWFLAKE_TEST"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "snowflake_role.lariat_snowflake_role",
            "snowflake_role_grants.lariat_snowflake_grants"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "time_sleep",
      "name": "wait_30_seconds",
      "provider": "provider[\"registry.terraform.io/hashicorp/time\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "create_duration": "30s",
            "destroy_duration": null,
            "id": "2022-10-17T16:09:37Z",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "null_resource.previous"
          ]
        }
      ]
    }
  ]
}
